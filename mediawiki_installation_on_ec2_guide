=How to install MediaWiki onto an AWS EC2 instance=

==Set up the LAMP stack==
I used a LAMP (Linux/Apache/MariaDB/PHP) stack in this guide.
The AWS EC2 instance wizard allows you to select Debian Linux as your operating system.

When I created the EC2 instance, I also created a private ssh key specifically for the instance.
I like to set up folders in my Documents directory for each website, so this one I named AWSJackogdoches.
I had to set the key's permission using the following command:

> chmod 600 "key name".pem

Otherwise, the EC2 instance will deny your shell connection.
This sets the key to only be read/writeable by you.
Once the permission is set, you can begin accessing the EC2 instance with the ssh command:

> ssh -i "key name".pem "username"@"ec2 IPv4 DNS"

Now we need to install Apache2, MariaDB, and PHP. MediaWiki has a bunch of other dependencies,
but for now we just want to install the LAMP stack itself.
First it is a good idea to run a general software update:

> sudo apt update
> sudo apt upgrade

===Apache2===
Once that is done, install Apache2:

> sudo apt install -y apache2 apache2-utils

Then, allow Apache2 to automatically start at the same time as the system:

> sudo systemctl enable apache2

Finally, we can see if Apache2 is both running and enabled with the following command:

> systemctl status apache2

If it says "enabled" and "running," then everything is good to go with Apache2 at the moment.
You can also check the EC2 instance's Public IPv4 address in a browser (remember it needs http and not https as it is not yet secure--if you are using Safari or Chrome, it may prevent you from trying to open this address due to it being uncertified.)

===MariaDB===
Now we install MariaDB, which was developed open-source as a free alternative to MySQL.
If I'm not mistaken, the Wikimedia projects use MariaDB. First:

> sudo apt install mariadb-server mariadb-client

Check that it is running with:

> systemctl status mariadb

If it is not already set to "enabled" and "running," enter:

> sudo systemctl start mariadb
> sudo systemctl enable mariadb

Once MariaDB shows "enabled" and "running," it is at an acceptable stage of configuration for our purposes and we can move on to the next installation.

===PHP===
MediaWiki recommends PHP7.4.
This means we have to install a bunch of other things. First:

> sudo apt -y install lsb-release apt-transport-https ca-certificates

Which will allow us to download the GPG key for the repository we want:

> sudo wget -O /etc/apt/trusted.gpg.d/php/gpg https://packages.sury.org/php/aot.gpg

We can now add the repo:

> echo "deb https://packages.sury.org/php/ $(lsb_release -sc) main" | sudo tee /etc/apt/sources.list.d/php.list

And we now update the package list:

> sudo apt update

Allowing us to finally install PHP7.4:

> sudo apt install php7.4

Before we continue further, make sure we actually installed PHP7.4 by checking the version:

> php -version

If you see PHP 7.4.33, then you've done it;
yoyu just installed a full LAMP stack on your EC2 instance.
But we're not quite done yet;
We need to add a bunch of PHP MediaWiki dependencies:

> sudo apt-get install libapache2-mod-php7.4 php7.4-mysql php-common php7.4-cli php7.4-common php7.4-json php7.4-opcache php7.4-readline php7.4-calendar php7.4-dom php7.4-fileinfo php7.4-intl php7.4-json php7.4-mbstring php7.4-xml php7.4-xmlreader

Finally, we want to make sure that Apache2 is talking to PHP:

> sudo a2enmod php7.4

It might say it's already enabled, which is fine.
Make sure to restart Apache2 in case it wasn't:

> sudo systemctl restart apache2

Once that is done, we're good to download and unpack MediaWiki!

==Downloading and unpacking MediaWiki==
First make sure you're in the directory where you want to have your MediaWiki installation folder.
For me, I put it in /var/www, which is created by Apache2:

> cd /var/www

For the purposes of this guide, I downloaded the most recent Long Term Support version of MediaWiki;
As of 11 September 2023, this is 1.39.4, which has an end-of-life scheduled for November 2025:

> sudo wget https://releases.wikimedia.org/mediawiki/1.39/mediawiki-1.39.4.tar.gz

Once the download is finished, we need to unpack:

> sudo tar -xzvf mediawiki-1.39.4.tar.gz

Once it's finished unpacking, I like to remove the version number from the folder so it's easier to type:

> sudo mv mediawiki-1.39.4 mediawiki

Check that you did this successfully with either:

> cd mediawiki
> ls

Or just:

> ls

In the first case, you should see all of the Mediawiki file folders, .phps, and .jsons;
In the second case, you should just see a folder named mediawiki.
Either way, you've successfully downloaded and unpacked MediaWiki 1.39.4!
